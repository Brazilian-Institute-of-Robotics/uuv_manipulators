<!-- Work in progress. Code not working yet!!! -->

<!-- Run the aruco_detect node -->
<launch>

  <node pkg="aruco_detect" name="aruco_detect"
    type="aruco_detect" output="log" respawn="false">
    <param name="image_transport" value="raw"/>
    <param name="publish_images" value="true" />
    <param name="fiducial_len" value="0.12"/>
    <param name="dictionary" value="16"/>
    <param name="do_pose_estimation" value="true"/>
    <param name="adaptiveThreshConstant" value="7"/>
    <param name="adaptiveThreshWinSizeMax" value="53"/>
    <param name="adaptiveThreshWinSizeMin" value="3"/>
    <param name="adaptiveThreshWinSizeStep" value="4"/>
    <param name="cornerRefinementMaxIterations" value="1"/>
    <param name="cornerRefinementWinSize" value="5"/>
    <param name="cornerRefinementMinAccuracy" value="0.01"/>
    <param name="minMarkerDistanceRate" value="0.005"/>
    <param name="minMarkerPerimeterRate" value="0.03"/>
    <remap from="/camera"
        to="rexrov2/rexrov2/camera/camera_image"/>
    <remap from="/camera_info" to="/rexrov2/rexrov2/camera/camera_info"/>
  </node>

  <node type="fiducial_slam" pkg="fiducial_slam" output="log"
    name="fiducial_slam">
    <param name="map_file" value="$(env HOME)/.ros/slam/map.txt" />
    <param name="map_frame" value="map" />
    <param name="odom_frame" value="odom" />
    <param name="base_frame" value="rexrov2/base_link" />
    <param name="future_date_transforms" value="0.0" />
    <param name="publish_6dof_pose" value="false" />
    <param name="do_pose_estimation" value="false"/>
    <param name="fiducial_len" value="0.12"/>
    <remap from="/camera_info" to="/rexrov2/rexrov2/camera/camera_info"/>
  </node>

</launch>
